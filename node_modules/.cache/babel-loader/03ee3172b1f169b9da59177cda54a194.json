{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\John Geliberte\\\\Work\\\\freelance\\\\m1\\\\src\\\\components\\\\Navigation\\\\components\\\\FilterAOI.js\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\nimport { NavigationContext } from \"../NavigationContext\";\nimport { AppContext } from \"../../../AppContext\";\nexport default (() => {\n  const [stateNav, setStateNav] = useContext(NavigationContext);\n  const [stateApp, setStateApp] = useContext(AppContext);\n  const [aoiData, setAOIData] = useState([]);\n  const [aoiName, setAOIName] = useState(stateNav.aoiName ? stateNav.aoiName : []);\n  const [aoiNameList, setAOINameList] = useState([]);\n  useEffect(() => {\n    const groupBy = (arr, property) => {\n      return arr.reduce((memo, x) => {\n        if (!memo[x[property]]) {\n          memo[x[property]] = [];\n        }\n\n        memo[x[property]].push(x);\n        return memo;\n      }, {});\n    };\n\n    const layerData = groupBy(stateApp.customLayers, \"layer\")['interest'];\n\n    if (layerData && layerData.length > 0) {\n      setAOIData(layerData);\n      setAOINameList(layerData.filter(layer => layer.name).map(layer => layer.name));\n    }\n  }, [stateApp.customLayers]);\n\n  const handleAOIChange = value => {\n    let filter;\n\n    if (value && value.length) {\n      const layers = aoiData.filter(aoi => value.indexOf(aoi.name) > -1);\n      filter = layers.map(basinShape => {\n        return JSON.parse(basinShape.shape);\n      });\n      console.log(layers, filter);\n      setStateNav(stateNav => ({ ...stateNav,\n        aoiName: value\n      }));\n      setAOIName(value);\n    } else {\n      filter = null;\n      setStateNav(stateNav => ({ ...stateNav,\n        aoiName: null\n      }));\n    }\n\n    setStateNav(stateNav => ({ ...stateNav,\n      filterAOI: filter\n    }));\n  };\n\n  if (aoiNameList.length > 0) {\n    return /*#__PURE__*/React.createElement(Autocomplete, {\n      defaultValue: aoiName,\n      onChange: (event, newValue) => {\n        handleAOIChange(newValue);\n      },\n      multiple: true,\n      ChipProps: {\n        color: \"secondary\"\n      },\n      options: aoiNameList,\n      renderInput: params => /*#__PURE__*/React.createElement(TextField, Object.assign({}, params, {\n        variant: \"outlined\",\n        label: \"Area of Interest\",\n        placeholder: \"\",\n        fullWidth: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }\n      })),\n      disableListWrap: true,\n      id: \"virtualize-aoi\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 7\n      }\n    });\n  }\n\n  return null;\n});","map":{"version":3,"sources":["C:/Users/John Geliberte/Work/freelance/m1/src/components/Navigation/components/FilterAOI.js"],"names":["React","useContext","useEffect","useState","TextField","Autocomplete","NavigationContext","AppContext","stateNav","setStateNav","stateApp","setStateApp","aoiData","setAOIData","aoiName","setAOIName","aoiNameList","setAOINameList","groupBy","arr","property","reduce","memo","x","push","layerData","customLayers","length","filter","layer","name","map","handleAOIChange","value","layers","aoi","indexOf","basinShape","JSON","parse","shape","console","log","filterAOI","event","newValue","color","params"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\nimport { NavigationContext } from \"../NavigationContext\";\r\nimport { AppContext } from \"../../../AppContext\";\r\n\r\nexport default () => {\r\n  const [stateNav, setStateNav] = useContext(NavigationContext);\r\n  const [stateApp, setStateApp] = useContext(AppContext);\r\n  const [aoiData, setAOIData] = useState([]);\r\n  const [aoiName, setAOIName] = useState(\r\n    stateNav.aoiName ? stateNav.aoiName : []\r\n  );\r\n  const [aoiNameList, setAOINameList] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const groupBy = (arr, property) => {\r\n      return arr.reduce((memo, x) => {\r\n        if (!memo[x[property]]) {\r\n          memo[x[property]] = [];\r\n        }\r\n        memo[x[property]].push(x);\r\n        return memo;\r\n      }, {});\r\n    };\r\n\r\n    const layerData = groupBy(stateApp.customLayers, \"layer\")['interest'];\r\n    if (layerData && layerData.length > 0) {\r\n      setAOIData(layerData);\r\n      setAOINameList(layerData.filter(layer => layer.name).map(layer => layer.name));\r\n    }    \r\n  }, [stateApp.customLayers]);\r\n\r\n  const handleAOIChange = (value) => {\r\n    let filter;\r\n    if (value && value.length) {\r\n      const layers = aoiData.filter(aoi => value.indexOf(aoi.name) > -1);\r\n      filter = layers.map(basinShape => {\r\n        return JSON.parse(basinShape.shape);\r\n      });\r\n      console.log(layers, filter);\r\n      setStateNav((stateNav) => ({ ...stateNav, aoiName: value }));\r\n      setAOIName(value);\r\n    } else {\r\n      filter = null;\r\n      setStateNav((stateNav) => ({ ...stateNav, aoiName: null }));\r\n    }\r\n    setStateNav((stateNav) => ({ ...stateNav, filterAOI: filter }));\r\n  };\r\n\r\n  if (aoiNameList.length > 0) {\r\n    return (\r\n      <Autocomplete\r\n        defaultValue={aoiName}\r\n        onChange={(event, newValue) => {\r\n          handleAOIChange(newValue);\r\n        }}\r\n        multiple\r\n        ChipProps={{ color: \"secondary\" }}\r\n        options={aoiNameList}\r\n        renderInput={(params) => (\r\n          <TextField\r\n            {...params}\r\n            variant=\"outlined\"\r\n            label=\"Area of Interest\"\r\n            placeholder=\"\"\r\n            fullWidth\r\n          />\r\n        )}\r\n        disableListWrap\r\n        id=\"virtualize-aoi\"\r\n      />\r\n    );\r\n  }\r\n\r\n  return null;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}