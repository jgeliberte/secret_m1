{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\John Geliberte\\\\Work\\\\freelance\\\\m1\\\\src\\\\components\\\\BulkUpload\\\\components\\\\stepper.js\";\nimport React, { useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport { Radio } from '@material-ui/core';\nimport clsx from 'clsx';\nimport Stepper from '@material-ui/core/Stepper';\nimport Step from '@material-ui/core/Step';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport Check from '@material-ui/icons/Check';\nimport StepConnector from '@material-ui/core/StepConnector';\nimport Button from '@material-ui/core/Button';\nimport CSVFileReader from './CSVFileReader';\nimport M1neralHeaders from './M1neralHeaders';\nimport ReviewCSV from './ReviewCSV';\nimport UploadStepperComponent from './UploadStepperComponent';\nimport { AppContext } from '../../../AppContext';\nimport { useHistory } from \"react-router-dom\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport { ADDBULKCONTACT } from '../../../graphQL/useMutationAddBulkContacts';\nconst QontoConnector = withStyles({\n  alternativeLabel: {\n    flexDirection: 'column-reverse',\n    top: 49,\n    left: 'calc(-50% + 16px)',\n    right: 'calc(50% + 16px)'\n  },\n  active: {\n    '& $line': {\n      borderColor: '#0084e2'\n    }\n  },\n  completed: {\n    '& $line': {\n      borderColor: '#0084e2'\n    }\n  },\n  line: {\n    borderColor: '#eaeaf0',\n    borderTopWidth: 3,\n    borderRadius: 1\n  }\n})(StepConnector);\nconst NewSteplabel = withStyles({\n  alternativeLabel: {\n    flexDirection: 'column-reverse !important'\n  },\n  active: {\n    color: '#0084e2 !important'\n  },\n  completed: {\n    color: '#0084e2 !important'\n  }\n})(StepLabel);\nconst useQontoStepIconStyles = makeStyles({\n  root: {\n    color: '#0084e2',\n    display: 'flex',\n    height: 22,\n    alignItems: 'center',\n    flexDirection: 'column-reverse !important'\n  },\n  active: {\n    color: '#784af4'\n  },\n  circle: {\n    width: 15,\n    height: 15,\n    borderRadius: '50%',\n    backgroundColor: 'currentColor'\n  },\n  completed: {\n    color: '#0084e2',\n    zIndex: 1,\n    fontSize: 18\n  },\n  alternativeLabel: {\n    flexDirection: 'column-reverse !important'\n  }\n});\nconst style_radio = {\n  padding: '0px',\n  color: '#0084e2',\n  width: 15,\n  height: 15\n};\nconst style_hollow_grey = {\n  height: 15,\n  width: 15,\n  color: '#eaeaf0',\n  border: '3px solid',\n  borderRadius: '50%'\n};\n\nfunction QontoStepIcon(props) {\n  const classes = useQontoStepIconStyles();\n  const {\n    active,\n    completed\n  } = props;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: clsx(classes.root, {\n      [classes.active]: active\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 5\n    }\n  }, completed ? /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.circle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 20\n    }\n  }) : active ? /*#__PURE__*/React.createElement(Radio, {\n    style: style_radio,\n    color: \"primary\",\n    checked: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 64\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    style: style_hollow_grey,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 127\n    }\n  }));\n}\n\nQontoStepIcon.propTypes = {\n  /**\r\n   * Whether this step is active.\r\n   */\n  active: PropTypes.bool,\n\n  /**\r\n   * Mark the step as completed. Is passed to child components.\r\n   */\n  completed: PropTypes.bool\n};\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: '100%'\n  },\n  button: {\n    marginRight: theme.spacing(1)\n  },\n  instructions: {\n    marginTop: theme.spacing(1),\n    marginBottom: theme.spacing(1)\n  }\n}));\n\nfunction getSteps() {\n  return ['Select', 'Match', 'Review', 'Upload'];\n}\n\nconst mapping_buttons_div = {\n  maxWidth: '20%',\n  margin: '0px auto',\n  textAlign: 'center'\n};\nconst stepper_style = {\n  padding: '3px 24px'\n};\nexport default function CustomizedSteppers(props) {\n  const classes = useStyles();\n  const [stateApp, setStateApp] = React.useContext(AppContext);\n  const steps = getSteps();\n  const [createBulkContacts] = useMutation(ADDBULKCONTACT);\n  const userID = stateApp.user.mongoId;\n  let data_to_send = stateApp.csvContactsListToSend;\n\n  const handleNext = () => {\n    if (stateApp.activeStepNumber === steps.length - 2) {\n      data_to_send.forEach(element => {\n        element.createBy = userID;\n        element.lastUpdateBy = userID;\n        delete element.first_name;\n        delete element.last_name;\n        delete element.tableData;\n      });\n      createBulkContacts({\n        variables: {\n          contactList: data_to_send\n        },\n        refetchQueries: [\"getContacts\", \"getContactsByOwnerId\", \"getContactsCounter\", \"getContact\"],\n        awaitRefetchQueries: true\n      });\n      setStateApp(state => ({ ...state,\n        activeStepNumber: stateApp.activeStepNumber + 1\n      }));\n    } else {\n      setStateApp(state => ({ ...state,\n        activeStepNumber: stateApp.activeStepNumber + 1\n      }));\n    }\n\n    if (stateApp.activeStepNumber === steps.length - 1) {\n      handleReset();\n      routeChange('/contacts');\n    }\n  };\n\n  const handleBack = () => {\n    if (stateApp.activeStepNumber === 0) {\n      handleReset();\n      routeChange('/contacts');\n    } else {\n      setStateApp(state => ({ ...state,\n        activeStepNumber: stateApp.activeStepNumber - 1\n      }));\n    }\n  };\n\n  const handleReset = () => {\n    setStateApp(state => ({ ...state,\n      activeStepNumber: 0,\n      csvContactsList: [],\n      csvContactsListToSend: [],\n      mappedHeadersFromCSV: []\n    }));\n  };\n\n  let history = useHistory();\n\n  let routeChange = route => {\n    history.push(route);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Stepper, {\n    style: stepper_style,\n    alternativeLabel: true,\n    activeStep: stateApp.activeStepNumber,\n    connector: /*#__PURE__*/React.createElement(QontoConnector, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 105\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 7\n    }\n  }, steps.map(label => /*#__PURE__*/React.createElement(Step, {\n    key: label,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(NewSteplabel, {\n    StepIconComponent: QontoStepIcon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 13\n    }\n  }, label)))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 11\n    }\n  }, stateApp.activeStepNumber === 0 ? /*#__PURE__*/React.createElement(CSVFileReader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 46\n    }\n  }) : null, stateApp.activeStepNumber === 1 ? /*#__PURE__*/React.createElement(M1neralHeaders, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 46\n    }\n  }) : null, stateApp.activeStepNumber === 2 ? /*#__PURE__*/React.createElement(ReviewCSV, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 46\n    }\n  }) : null, stateApp.activeStepNumber === 3 ? /*#__PURE__*/React.createElement(UploadStepperComponent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 46\n    }\n  }) : null), /*#__PURE__*/React.createElement(\"div\", {\n    style: mapping_buttons_div,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 11\n    }\n  }, stateApp.activeStepNumber < 3 ? /*#__PURE__*/React.createElement(Button, {\n    onClick: handleBack,\n    className: classes.button,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 13\n    }\n  }, \"Back\") : null, stateApp.activeStepNumber > 0 ? /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: handleNext,\n    className: classes.button,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 15\n    }\n  }, stateApp.activeStepNumber >= steps.length - 2 ? stateApp.activeStepNumber === steps.length - 1 ? 'Done' : 'Upload' : 'Submit') : null))));\n}","map":{"version":3,"sources":["C:/Users/John Geliberte/Work/freelance/m1/src/components/BulkUpload/components/stepper.js"],"names":["React","useEffect","PropTypes","makeStyles","withStyles","Radio","clsx","Stepper","Step","StepLabel","Check","StepConnector","Button","CSVFileReader","M1neralHeaders","ReviewCSV","UploadStepperComponent","AppContext","useHistory","useMutation","ADDBULKCONTACT","QontoConnector","alternativeLabel","flexDirection","top","left","right","active","borderColor","completed","line","borderTopWidth","borderRadius","NewSteplabel","color","useQontoStepIconStyles","root","display","height","alignItems","circle","width","backgroundColor","zIndex","fontSize","style_radio","padding","style_hollow_grey","border","QontoStepIcon","props","classes","propTypes","bool","useStyles","theme","button","marginRight","spacing","instructions","marginTop","marginBottom","getSteps","mapping_buttons_div","maxWidth","margin","textAlign","stepper_style","CustomizedSteppers","stateApp","setStateApp","useContext","steps","createBulkContacts","userID","user","mongoId","data_to_send","csvContactsListToSend","handleNext","activeStepNumber","length","forEach","element","createBy","lastUpdateBy","first_name","last_name","tableData","variables","contactList","refetchQueries","awaitRefetchQueries","state","handleReset","routeChange","handleBack","csvContactsList","mappedHeadersFromCSV","history","route","push","map","label"],"mappings":";AAAA,OAAOA,KAAP,IAAcC,SAAd,QAA8B,OAA9B;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,UAAT,EAAqBC,UAArB,QAAuC,0BAAvC;AACA,SAASC,KAAT,QAAsB,mBAAtB;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA,OAAOC,OAAP,MAAoB,2BAApB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,KAAP,MAAkB,0BAAlB;AACA,OAAOC,aAAP,MAA0B,iCAA1B;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AACA,OAAOC,cAAP,MAA2B,kBAA3B;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,OAAOC,sBAAP,MAAmC,0BAAnC;AACA,SAAQC,UAAR,QAAyB,qBAAzB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,WAAT,QAA4B,qBAA5B;AACA,SAAQC,cAAR,QAA6B,6CAA7B;AAEA,MAAMC,cAAc,GAAGjB,UAAU,CAAC;AAChCkB,EAAAA,gBAAgB,EAAE;AAChBC,IAAAA,aAAa,EAAE,gBADC;AAEhBC,IAAAA,GAAG,EAAE,EAFW;AAGhBC,IAAAA,IAAI,EAAE,mBAHU;AAIhBC,IAAAA,KAAK,EAAE;AAJS,GADc;AAOhCC,EAAAA,MAAM,EAAE;AACN,eAAW;AACTC,MAAAA,WAAW,EAAE;AADJ;AADL,GAPwB;AAYhCC,EAAAA,SAAS,EAAE;AACT,eAAW;AACTD,MAAAA,WAAW,EAAE;AADJ;AADF,GAZqB;AAiBhCE,EAAAA,IAAI,EAAE;AACJF,IAAAA,WAAW,EAAE,SADT;AAEJG,IAAAA,cAAc,EAAE,CAFZ;AAGJC,IAAAA,YAAY,EAAE;AAHV;AAjB0B,CAAD,CAAV,CAsBpBrB,aAtBoB,CAAvB;AAwBA,MAAMsB,YAAY,GAAG7B,UAAU,CAAC;AAC9BkB,EAAAA,gBAAgB,EAAC;AACfC,IAAAA,aAAa,EAAE;AADA,GADa;AAI9BI,EAAAA,MAAM,EAAC;AACLO,IAAAA,KAAK,EAAE;AADF,GAJuB;AAO9BL,EAAAA,SAAS,EAAC;AACRK,IAAAA,KAAK,EAAE;AADC;AAPoB,CAAD,CAAV,CAUlBzB,SAVkB,CAArB;AAWA,MAAM0B,sBAAsB,GAAGhC,UAAU,CAAC;AACxCiC,EAAAA,IAAI,EAAE;AACJF,IAAAA,KAAK,EAAE,SADH;AAEJG,IAAAA,OAAO,EAAE,MAFL;AAGJC,IAAAA,MAAM,EAAE,EAHJ;AAIJC,IAAAA,UAAU,EAAE,QAJR;AAKJhB,IAAAA,aAAa,EAAE;AALX,GADkC;AAQxCI,EAAAA,MAAM,EAAE;AACNO,IAAAA,KAAK,EAAE;AADD,GARgC;AAWxCM,EAAAA,MAAM,EAAE;AACNC,IAAAA,KAAK,EAAE,EADD;AAENH,IAAAA,MAAM,EAAE,EAFF;AAGNN,IAAAA,YAAY,EAAE,KAHR;AAINU,IAAAA,eAAe,EAAE;AAJX,GAXgC;AAiBxCb,EAAAA,SAAS,EAAE;AACTK,IAAAA,KAAK,EAAE,SADE;AAETS,IAAAA,MAAM,EAAE,CAFC;AAGTC,IAAAA,QAAQ,EAAE;AAHD,GAjB6B;AAsBxCtB,EAAAA,gBAAgB,EAAC;AACfC,IAAAA,aAAa,EAAE;AADA;AAtBuB,CAAD,CAAzC;AA2BA,MAAMsB,WAAW,GAAG;AAClBC,EAAAA,OAAO,EAAE,KADS;AAElBZ,EAAAA,KAAK,EAAE,SAFW;AAGlBO,EAAAA,KAAK,EAAE,EAHW;AAIlBH,EAAAA,MAAM,EAAE;AAJU,CAApB;AAMA,MAAMS,iBAAiB,GAAG;AACxBT,EAAAA,MAAM,EAAE,EADgB;AAExBG,EAAAA,KAAK,EAAE,EAFiB;AAGxBP,EAAAA,KAAK,EAAE,SAHiB;AAIxBc,EAAAA,MAAM,EAAE,WAJgB;AAKxBhB,EAAAA,YAAY,EAAE;AALU,CAA1B;;AAOA,SAASiB,aAAT,CAAuBC,KAAvB,EAA8B;AAC5B,QAAMC,OAAO,GAAGhB,sBAAsB,EAAtC;AACA,QAAM;AAAER,IAAAA,MAAF;AAAUE,IAAAA;AAAV,MAAwBqB,KAA9B;AAEA,sBACE;AACE,IAAA,SAAS,EAAE5C,IAAI,CAAC6C,OAAO,CAACf,IAAT,EAAe;AAC5B,OAACe,OAAO,CAACxB,MAAT,GAAkBA;AADU,KAAf,CADjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAKGE,SAAS,gBAAG;AAAK,IAAA,SAAS,EAAEsB,OAAO,CAACX,MAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAH,GAAuCb,MAAM,gBAAE,oBAAC,KAAD;AAAO,IAAA,KAAK,EAAEkB,WAAd;AAA2B,IAAA,KAAK,EAAC,SAAjC;AAA2C,IAAA,OAAO,EAAE,IAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAF,gBAAiE;AAAK,IAAA,KAAK,EAAEE,iBAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAL1H,CADF;AASD;;AAEDE,aAAa,CAACG,SAAd,GAA0B;AACxB;;;AAGAzB,EAAAA,MAAM,EAAEzB,SAAS,CAACmD,IAJM;;AAKxB;;;AAGAxB,EAAAA,SAAS,EAAE3B,SAAS,CAACmD;AARG,CAA1B;AAWA,MAAMC,SAAS,GAAGnD,UAAU,CAAEoD,KAAD,KAAY;AACvCnB,EAAAA,IAAI,EAAE;AACJK,IAAAA,KAAK,EAAE;AADH,GADiC;AAIvCe,EAAAA,MAAM,EAAE;AACNC,IAAAA,WAAW,EAAEF,KAAK,CAACG,OAAN,CAAc,CAAd;AADP,GAJ+B;AAOvCC,EAAAA,YAAY,EAAE;AACZC,IAAAA,SAAS,EAAEL,KAAK,CAACG,OAAN,CAAc,CAAd,CADC;AAEZG,IAAAA,YAAY,EAAEN,KAAK,CAACG,OAAN,CAAc,CAAd;AAFF;AAPyB,CAAZ,CAAD,CAA5B;;AAaA,SAASI,QAAT,GAAoB;AAClB,SAAO,CAAC,QAAD,EAAW,OAAX,EAAoB,QAApB,EAA6B,QAA7B,CAAP;AACD;;AAED,MAAMC,mBAAmB,GAAE;AACvBC,EAAAA,QAAQ,EAAE,KADa;AAEvBC,EAAAA,MAAM,EAAE,UAFe;AAGvBC,EAAAA,SAAS,EAAE;AAHY,CAA3B;AAKA,MAAMC,aAAa,GAAG;AACpBrB,EAAAA,OAAO,EAAE;AADW,CAAtB;AAGA,eAAe,SAASsB,kBAAT,CAA4BlB,KAA5B,EAAmC;AAChD,QAAMC,OAAO,GAAGG,SAAS,EAAzB;AACA,QAAM,CAACe,QAAD,EAAWC,WAAX,IAA0BtE,KAAK,CAACuE,UAAN,CAAiBtD,UAAjB,CAAhC;AACA,QAAMuD,KAAK,GAAGV,QAAQ,EAAtB;AACA,QAAM,CAACW,kBAAD,IAAuBtD,WAAW,CAACC,cAAD,CAAxC;AACA,QAAMsD,MAAM,GAAGL,QAAQ,CAACM,IAAT,CAAcC,OAA7B;AACA,MAAIC,YAAY,GAAGR,QAAQ,CAACS,qBAA5B;;AACA,QAAMC,UAAU,GAAG,MAAM;AACvB,QAAGV,QAAQ,CAACW,gBAAT,KAA+BR,KAAK,CAACS,MAAN,GAAe,CAAjD,EAAmD;AACjDJ,MAAAA,YAAY,CAACK,OAAb,CAAqBC,OAAO,IAAI;AAC9BA,QAAAA,OAAO,CAACC,QAAR,GAAmBV,MAAnB;AACAS,QAAAA,OAAO,CAACE,YAAR,GAAuBX,MAAvB;AACA,eAAOS,OAAO,CAACG,UAAf;AACA,eAAOH,OAAO,CAACI,SAAf;AACA,eAAOJ,OAAO,CAACK,SAAf;AACD,OAND;AAOAf,MAAAA,kBAAkB,CAAC;AACjBgB,QAAAA,SAAS,EAAE;AACTC,UAAAA,WAAW,EAAEb;AADJ,SADM;AAIjBc,QAAAA,cAAc,EAAE,CACd,aADc,EAEd,sBAFc,EAGd,oBAHc,EAId,YAJc,CAJC;AAUjBC,QAAAA,mBAAmB,EAAE;AAVJ,OAAD,CAAlB;AAYAtB,MAAAA,WAAW,CAAEuB,KAAD,KAAY,EAAC,GAAGA,KAAJ;AAAUb,QAAAA,gBAAgB,EAAEX,QAAQ,CAACW,gBAAT,GAA4B;AAAxD,OAAZ,CAAD,CAAX;AACD,KArBD,MAqBK;AACDV,MAAAA,WAAW,CAAEuB,KAAD,KAAY,EAAC,GAAGA,KAAJ;AAAUb,QAAAA,gBAAgB,EAAEX,QAAQ,CAACW,gBAAT,GAA4B;AAAxD,OAAZ,CAAD,CAAX;AACH;;AACD,QAAGX,QAAQ,CAACW,gBAAT,KAA8BR,KAAK,CAACS,MAAN,GAAc,CAA/C,EAAiD;AAC/Ca,MAAAA,WAAW;AACXC,MAAAA,WAAW,CAAC,WAAD,CAAX;AACD;AACF,GA7BD;;AA+BA,QAAMC,UAAU,GAAG,MAAM;AACvB,QAAG3B,QAAQ,CAACW,gBAAT,KAA8B,CAAjC,EAAmC;AAC/Bc,MAAAA,WAAW;AACXC,MAAAA,WAAW,CAAC,WAAD,CAAX;AACH,KAHD,MAGK;AACDzB,MAAAA,WAAW,CAAEuB,KAAD,KAAY,EAAC,GAAGA,KAAJ;AAAUb,QAAAA,gBAAgB,EAAEX,QAAQ,CAACW,gBAAT,GAA4B;AAAxD,OAAZ,CAAD,CAAX;AACH;AACF,GAPD;;AASA,QAAMc,WAAW,GAAG,MAAM;AACxBxB,IAAAA,WAAW,CAAEuB,KAAD,KAAY,EAAC,GAAGA,KAAJ;AAAUb,MAAAA,gBAAgB,EAAE,CAA5B;AAA+BiB,MAAAA,eAAe,EAAC,EAA/C;AAAmDnB,MAAAA,qBAAqB,EAAE,EAA1E;AAA8EoB,MAAAA,oBAAoB,EAAE;AAApG,KAAZ,CAAD,CAAX;AACD,GAFD;;AAIA,MAAIC,OAAO,GAAGjF,UAAU,EAAxB;;AAEA,MAAI6E,WAAW,GAAGK,KAAD,IAAU;AACzBD,IAAAA,OAAO,CAACE,IAAR,CAAaD,KAAb;AACD,GAFD;;AAIA,sBACE;AAAK,IAAA,SAAS,EAAEjD,OAAO,CAACf,IAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,OAAD;AAAS,IAAA,KAAK,EAAE+B,aAAhB;AAA+B,IAAA,gBAAgB,MAA/C;AAAgD,IAAA,UAAU,EAAEE,QAAQ,CAACW,gBAArE;AAAuF,IAAA,SAAS,eAAE,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAlG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGR,KAAK,CAAC8B,GAAN,CAAWC,KAAD,iBACT,oBAAC,IAAD;AAAM,IAAA,GAAG,EAAEA,KAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,YAAD;AAAc,IAAA,iBAAiB,EAAEtD,aAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAiDsD,KAAjD,CADF,CADD,CADH,CADF,eAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARF,eASE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IATF,eAUE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACClC,QAAQ,CAACW,gBAAT,KAA8B,CAA9B,gBAAkC,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAlC,GAAoD,IADrD,EAECX,QAAQ,CAACW,gBAAT,KAA8B,CAA9B,gBAAkC,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAlC,GAAqD,IAFtD,EAGCX,QAAQ,CAACW,gBAAT,KAA8B,CAA9B,gBAAkC,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAlC,GAAgD,IAHjD,EAICX,QAAQ,CAACW,gBAAT,KAA8B,CAA9B,gBAAkC,oBAAC,sBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAlC,GAA6D,IAJ9D,CADF,eAOE;AAAK,IAAA,KAAK,EAAEjB,mBAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACIM,QAAQ,CAACW,gBAAT,GAA4B,CAA5B,gBACF,oBAAC,MAAD;AAAS,IAAA,OAAO,EAAEgB,UAAlB;AAA8B,IAAA,SAAS,EAAE7C,OAAO,CAACK,MAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADE,GAID,IALH,EAOGa,QAAQ,CAACW,gBAAT,GAA4B,CAA5B,gBACC,oBAAC,MAAD;AACE,IAAA,OAAO,EAAC,WADV;AAEE,IAAA,KAAK,EAAC,SAFR;AAGE,IAAA,OAAO,EAAED,UAHX;AAIE,IAAA,SAAS,EAAE5B,OAAO,CAACK,MAJrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAMGa,QAAQ,CAACW,gBAAT,IAA6BR,KAAK,CAACS,MAAN,GAAe,CAA5C,GAAgDZ,QAAQ,CAACW,gBAAT,KAA8BR,KAAK,CAACS,MAAN,GAAe,CAA7C,GAA+C,MAA/C,GAAuD,QAAvG,GAAkH,QANrH,CADD,GASC,IAhBJ,CAPF,CADF,CAVF,CADF;AAyCD","sourcesContent":["import React,{useEffect} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\r\nimport { Radio } from '@material-ui/core';\r\nimport clsx from 'clsx';\r\nimport Stepper from '@material-ui/core/Stepper';\r\nimport Step from '@material-ui/core/Step';\r\nimport StepLabel from '@material-ui/core/StepLabel';\r\nimport Check from '@material-ui/icons/Check';\r\nimport StepConnector from '@material-ui/core/StepConnector';\r\nimport Button from '@material-ui/core/Button';\r\nimport CSVFileReader from './CSVFileReader'\r\nimport M1neralHeaders from './M1neralHeaders';\r\nimport ReviewCSV from './ReviewCSV'\r\nimport UploadStepperComponent from './UploadStepperComponent'\r\nimport {AppContext} from '../../../AppContext'\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useMutation } from \"@apollo/react-hooks\";\r\nimport {ADDBULKCONTACT} from '../../../graphQL/useMutationAddBulkContacts'\r\n\r\nconst QontoConnector = withStyles({\r\n  alternativeLabel: {\r\n    flexDirection: 'column-reverse',\r\n    top: 49,\r\n    left: 'calc(-50% + 16px)',\r\n    right: 'calc(50% + 16px)',\r\n  },\r\n  active: {\r\n    '& $line': {\r\n      borderColor: '#0084e2',\r\n    },\r\n  },\r\n  completed: {\r\n    '& $line': {\r\n      borderColor: '#0084e2',\r\n    },\r\n  },\r\n  line: {\r\n    borderColor: '#eaeaf0',\r\n    borderTopWidth: 3,\r\n    borderRadius: 1,\r\n  },\r\n})(StepConnector);\r\n\r\nconst NewSteplabel = withStyles({\r\n  alternativeLabel:{\r\n    flexDirection: 'column-reverse !important'\r\n  },\r\n  active:{\r\n    color: '#0084e2 !important'\r\n  },\r\n  completed:{\r\n    color: '#0084e2 !important'\r\n  }\r\n})(StepLabel)\r\nconst useQontoStepIconStyles = makeStyles({\r\n  root: {\r\n    color: '#0084e2',\r\n    display: 'flex',\r\n    height: 22,\r\n    alignItems: 'center',\r\n    flexDirection: 'column-reverse !important',\r\n  },\r\n  active: {\r\n    color: '#784af4',\r\n  },\r\n  circle: {\r\n    width: 15,\r\n    height: 15,\r\n    borderRadius: '50%',\r\n    backgroundColor: 'currentColor',\r\n  },\r\n  completed: {\r\n    color: '#0084e2',\r\n    zIndex: 1,\r\n    fontSize: 18,\r\n  },\r\n  alternativeLabel:{\r\n    flexDirection: 'column-reverse !important',\r\n  },\r\n});\r\n\r\nconst style_radio = {\r\n  padding: '0px',\r\n  color: '#0084e2',\r\n  width: 15,\r\n  height: 15,\r\n}\r\nconst style_hollow_grey = {\r\n  height: 15,\r\n  width: 15,\r\n  color: '#eaeaf0',\r\n  border: '3px solid',\r\n  borderRadius: '50%',\r\n}\r\nfunction QontoStepIcon(props) {\r\n  const classes = useQontoStepIconStyles();\r\n  const { active, completed } = props;\r\n\r\n  return (\r\n    <div\r\n      className={clsx(classes.root, {\r\n        [classes.active]: active,\r\n      })}\r\n    >\r\n      {completed ? <div className={classes.circle}/> : active? <Radio style={style_radio} color=\"primary\" checked={true} /> : <div style={style_hollow_grey}/> }\r\n    </div>\r\n  );\r\n}\r\n\r\nQontoStepIcon.propTypes = {\r\n  /**\r\n   * Whether this step is active.\r\n   */\r\n  active: PropTypes.bool,\r\n  /**\r\n   * Mark the step as completed. Is passed to child components.\r\n   */\r\n  completed: PropTypes.bool,\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: '100%',\r\n  },\r\n  button: {\r\n    marginRight: theme.spacing(1),\r\n  },\r\n  instructions: {\r\n    marginTop: theme.spacing(1),\r\n    marginBottom: theme.spacing(1),\r\n  },\r\n}));\r\n\r\nfunction getSteps() {\r\n  return ['Select', 'Match', 'Review','Upload'];\r\n}\r\n\r\nconst mapping_buttons_div ={\r\n    maxWidth: '20%',\r\n    margin: '0px auto',\r\n    textAlign: 'center'\r\n}\r\nconst stepper_style = {\r\n  padding: '3px 24px'\r\n}\r\nexport default function CustomizedSteppers(props) {\r\n  const classes = useStyles();\r\n  const [stateApp, setStateApp] = React.useContext(AppContext);\r\n  const steps = getSteps();\r\n  const [createBulkContacts] = useMutation(ADDBULKCONTACT);\r\n  const userID = stateApp.user.mongoId;\r\n  let data_to_send = stateApp.csvContactsListToSend\r\n  const handleNext = () => {\r\n    if(stateApp.activeStepNumber  === steps.length - 2){\r\n      data_to_send.forEach(element => {\r\n        element.createBy = userID;\r\n        element.lastUpdateBy = userID;\r\n        delete element.first_name\r\n        delete element.last_name\r\n        delete element.tableData\r\n      });\r\n      createBulkContacts({\r\n        variables: {\r\n          contactList: data_to_send,\r\n        },\r\n        refetchQueries: [\r\n          \"getContacts\",\r\n          \"getContactsByOwnerId\",\r\n          \"getContactsCounter\",\r\n          \"getContact\",\r\n        ],\r\n        awaitRefetchQueries: true,\r\n      });\r\n      setStateApp((state) => ({...state,activeStepNumber: stateApp.activeStepNumber + 1}));\r\n    }else{\r\n        setStateApp((state) => ({...state,activeStepNumber: stateApp.activeStepNumber + 1}));\r\n    }\r\n    if(stateApp.activeStepNumber === steps.length -1){\r\n      handleReset()\r\n      routeChange('/contacts')\r\n    }\r\n  };\r\n\r\n  const handleBack = () => {\r\n    if(stateApp.activeStepNumber === 0){\r\n        handleReset();\r\n        routeChange('/contacts');\r\n    }else{\r\n        setStateApp((state) => ({...state,activeStepNumber: stateApp.activeStepNumber - 1}));\r\n    }\r\n  };\r\n\r\n  const handleReset = () => {\r\n    setStateApp((state) => ({...state,activeStepNumber: 0, csvContactsList:[], csvContactsListToSend: [], mappedHeadersFromCSV: []}))\r\n  };\r\n\r\n  let history = useHistory();\r\n\r\n  let routeChange =(route)=> {\r\n    history.push(route);\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Stepper style={stepper_style} alternativeLabel activeStep={stateApp.activeStepNumber} connector={<QontoConnector />}>\r\n        {steps.map((label) => (\r\n          <Step key={label}>\r\n            <NewSteplabel StepIconComponent={QontoStepIcon}>{label}</NewSteplabel>\r\n          </Step>\r\n        ))}\r\n      </Stepper>\r\n      <br/>\r\n      <hr/>\r\n      <div>\r\n        <div>\r\n          <div>\r\n          {stateApp.activeStepNumber === 0 ? <CSVFileReader/>: null}\r\n          {stateApp.activeStepNumber === 1 ? <M1neralHeaders/>: null}\r\n          {stateApp.activeStepNumber === 2 ? <ReviewCSV/>: null}\r\n          {stateApp.activeStepNumber === 3 ? <UploadStepperComponent/>: null}\r\n          </div>\r\n          <div style={mapping_buttons_div}>\r\n            { stateApp.activeStepNumber < 3 ?\r\n            <Button  onClick={handleBack} className={classes.button}>\r\n              Back\r\n            </Button>\r\n            :null\r\n            }\r\n            {stateApp.activeStepNumber > 0 ? \r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={handleNext}\r\n                className={classes.button}\r\n              >\r\n                {stateApp.activeStepNumber >= steps.length - 2 ? stateApp.activeStepNumber === steps.length - 1?'Done' :'Upload' : 'Submit'}\r\n              </Button>\r\n            : null}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}