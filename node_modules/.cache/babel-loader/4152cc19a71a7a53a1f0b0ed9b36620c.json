{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\John Geliberte\\\\Work\\\\freelance\\\\m1\\\\src\\\\components\\\\Profile\\\\ProfileContent.js\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport { Grid } from \"@material-ui/core\";\nimport Box from \"@material-ui/core/Box\";\nimport Button from \"@material-ui/core/Button\";\nimport CardMedia from \"@material-ui/core/CardMedia\";\nimport MuiDialogContent from \"@material-ui/core/DialogContent\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Skeleton from \"@material-ui/lab/Skeleton\";\nimport React, { useContext, useEffect } from \"react\";\nimport { AppContext } from \"../../AppContext\";\nimport { GETPROFILE } from \"../../graphQL/useQueryGetProfile\";\nimport { ProfileContext } from \"./ProfileContext\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    padding: theme.spacing(2)\n  },\n  label: {\n    position: \"initial\",\n    textAlign: \"left\",\n    transform: \"none\",\n    fontSize: 16,\n    color: \"black\",\n    \"&& + *\": {\n      marginTop: theme.spacing(1)\n    }\n  },\n  focused: {\n    \"&$label\": {\n      color: \"black\"\n    }\n  },\n  helperText: {\n    color: \"#6c757d\",\n    lineHeight: \"19.2px\",\n    marginTop: theme.spacing(1) / 2,\n    fontSize: 12.8\n  },\n  input: {\n    borderRadius: 4,\n    position: \"relative\",\n    backgroundColor: \"white\",\n    borderWidth: 1,\n    borderStyle: \"solid\",\n    borderColor: \"#ced4da\",\n    fontSize: 16,\n    width: \"auto\",\n    padding: \"10px 12px\",\n    transition: theme.transitions.create([\"border-color\", \"box-shadow\"]),\n    \"&:focus\": {\n      borderRadius: 4,\n      borderColor: \"#ced4da\"\n    }\n  },\n  button: {\n    textTransform: \"none\",\n    width: \"100%\"\n  },\n  image: {\n    width: \"100%\",\n    height: \"180px\",\n    borderRadius: \"4px\"\n  }\n}));\n\nconst ProfileContent = () => {\n  const classes = useStyles();\n  const [stateApp, setStateApp] = useContext(AppContext);\n  const [stateProfile, setStateProfile] = useContext(ProfileContext);\n  const {\n    user: {\n      email\n    }\n  } = stateApp;\n  const {\n    data,\n    error,\n    loading\n  } = useQuery(GETPROFILE, {\n    variables: {\n      email\n    },\n    fetchPolicy: \"network-only\"\n  });\n  const {\n    fields: {\n      fullname,\n      displayname,\n      activity,\n      phone,\n      timezone,\n      profileImage\n    },\n    isImageModalOpen\n  } = stateProfile;\n  useEffect(() => {\n    var _data$profileByEmail;\n\n    if (data === null || data === void 0 ? void 0 : (_data$profileByEmail = data.profileByEmail) === null || _data$profileByEmail === void 0 ? void 0 : _data$profileByEmail.profile) {\n      const {\n        profileByEmail: {\n          profile: {\n            fullname,\n            displayname,\n            activity,\n            phone,\n            timezone,\n            profileImage\n          }\n        }\n      } = data;\n      setStateProfile({ ...stateProfile,\n        fields: {\n          fullname,\n          displayname,\n          activity,\n          phone,\n          timezone,\n          profileImage\n        }\n      });\n    }\n  }, [data]);\n\n  const onChange = ({\n    name,\n    value\n  }) => {\n    setStateProfile({ ...stateProfile,\n      fields: { ...stateProfile.fields,\n        [name]: value\n      }\n    });\n  };\n\n  const handleImage = e => {\n    var _e$target$files;\n\n    if (((_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files.length) > 0) {\n      const reader = new FileReader();\n      reader.addEventListener(\"load\", () => setStateProfile({ ...stateProfile,\n        isImageModalOpen: true,\n        selectedImage: reader.result\n      }));\n      reader.readAsDataURL(e.target.files[0]);\n    }\n  };\n\n  const formatPhone = number => {\n    const formatted = `${number}`.replace(/\\D/g, \"\");\n    const match = formatted.match(/^(\\d{3})(\\d{3})(\\d{4})$/);\n\n    if (match) {\n      return `(${match[1]}) ${match[2]}-${match[3]}`;\n    }\n\n    return number;\n  };\n\n  return /*#__PURE__*/React.createElement(MuiDialogContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    sm: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    InputLabelProps: {\n      classes: {\n        root: classes.label,\n        focused: classes.focused\n      },\n      shrink: true\n    },\n    InputProps: {\n      disableUnderline: true,\n      classes: {\n        input: classes.input\n      }\n    },\n    FormHelperTextProps: {\n      classes: {\n        root: classes.helperText\n      }\n    },\n    label: \"Full Name\",\n    placeholder: \"Your Full Name\",\n    name: \"fullname\",\n    value: fullname,\n    onChange: ({\n      target\n    }) => onChange(target),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Box, {\n    pb: 2.5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    InputLabelProps: {\n      classes: {\n        root: classes.label,\n        focused: classes.focused\n      },\n      shrink: true\n    },\n    InputProps: {\n      disableUnderline: true,\n      classes: {\n        input: classes.input\n      }\n    },\n    FormHelperTextProps: {\n      classes: {\n        root: classes.helperText\n      }\n    },\n    label: \"Display Name\",\n    placeholder: \"Display Name\",\n    helperText: \"This could be your nickname or first name\",\n    name: \"displayname\",\n    value: displayname,\n    onChange: ({\n      target\n    }) => onChange(target),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Box, {\n    pb: 2.5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    InputLabelProps: {\n      classes: {\n        root: classes.label,\n        focused: classes.focused\n      },\n      shrink: true\n    },\n    InputProps: {\n      disableUnderline: true,\n      error: true,\n      classes: {\n        input: classes.input\n      }\n    },\n    FormHelperTextProps: {\n      classes: {\n        root: classes.helperText\n      }\n    },\n    label: \"What you do\",\n    placeholder: \"Your Role or Title\",\n    helperText: \"Let people know what you do\",\n    name: \"activity\",\n    value: activity,\n    onChange: ({\n      target\n    }) => onChange(target),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Box, {\n    pb: 2.5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    InputLabelProps: {\n      classes: {\n        root: classes.label,\n        focused: classes.focused\n      },\n      shrink: true\n    },\n    InputProps: {\n      disableUnderline: true,\n      error: true,\n      classes: {\n        input: classes.input\n      }\n    },\n    FormHelperTextProps: {\n      classes: {\n        root: classes.helperText\n      }\n    },\n    label: \"Phone number\",\n    placeholder: formatPhone(\"555-555-5555\"),\n    helperText: \"Enter your phone number\",\n    name: \"phone\",\n    value: formatPhone(phone),\n    onChange: ({\n      target\n    }) => onChange(target),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    sm: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 11\n    }\n  }, \"Profile Photo\"), (profileImage === null || profileImage === void 0 ? void 0 : profileImage.length) > 0 ? /*#__PURE__*/React.createElement(CardMedia, {\n    className: classes.image,\n    component: \"img\",\n    image: profileImage,\n    title: \"Profile Image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 13\n    }\n  }) : /*#__PURE__*/React.createElement(Skeleton, {\n    variant: \"rect\",\n    className: classes.image,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Box, {\n    pb: 2.5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    accept: \"image/*\",\n    style: {\n      display: \"none\"\n    },\n    id: \"profile-image\",\n    type: \"file\",\n    name: \"profileimage\",\n    onChange: e => handleImage(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"profile-image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"outlined\",\n    component: \"span\",\n    className: classes.button,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 13\n    }\n  }, \"Upload an image\")))));\n};\n\nexport default ProfileContent;","map":{"version":3,"sources":["C:/Users/John Geliberte/Work/freelance/m1/src/components/Profile/ProfileContent.js"],"names":["useQuery","Grid","Box","Button","CardMedia","MuiDialogContent","makeStyles","TextField","Typography","Skeleton","React","useContext","useEffect","AppContext","GETPROFILE","ProfileContext","useStyles","theme","root","padding","spacing","label","position","textAlign","transform","fontSize","color","marginTop","focused","helperText","lineHeight","input","borderRadius","backgroundColor","borderWidth","borderStyle","borderColor","width","transition","transitions","create","button","textTransform","image","height","ProfileContent","classes","stateApp","setStateApp","stateProfile","setStateProfile","user","email","data","error","loading","variables","fetchPolicy","fields","fullname","displayname","activity","phone","timezone","profileImage","isImageModalOpen","profileByEmail","profile","onChange","name","value","handleImage","e","target","files","length","reader","FileReader","addEventListener","selectedImage","result","readAsDataURL","formatPhone","number","formatted","replace","match","shrink","disableUnderline","display"],"mappings":"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","sourcesContent":["import { useQuery } from \"@apollo/react-hooks\";\r\nimport { Grid } from \"@material-ui/core\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CardMedia from \"@material-ui/core/CardMedia\";\r\nimport MuiDialogContent from \"@material-ui/core/DialogContent\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Skeleton from \"@material-ui/lab/Skeleton\";\r\nimport React, { useContext, useEffect } from \"react\";\r\nimport { AppContext } from \"../../AppContext\";\r\nimport { GETPROFILE } from \"../../graphQL/useQueryGetProfile\";\r\nimport { ProfileContext } from \"./ProfileContext\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    padding: theme.spacing(2),\r\n  },\r\n  label: {\r\n    position: \"initial\",\r\n    textAlign: \"left\",\r\n    transform: \"none\",\r\n    fontSize: 16,\r\n    color: \"black\",\r\n    \"&& + *\": {\r\n      marginTop: theme.spacing(1),\r\n    },\r\n  },\r\n  focused: {\r\n    \"&$label\": {\r\n      color: \"black\",\r\n    },\r\n  },\r\n  helperText: {\r\n    color: \"#6c757d\",\r\n    lineHeight: \"19.2px\",\r\n    marginTop: theme.spacing(1) / 2,\r\n    fontSize: 12.8,\r\n  },\r\n  input: {\r\n    borderRadius: 4,\r\n    position: \"relative\",\r\n    backgroundColor: \"white\",\r\n    borderWidth: 1,\r\n    borderStyle: \"solid\",\r\n    borderColor: \"#ced4da\",\r\n    fontSize: 16,\r\n    width: \"auto\",\r\n    padding: \"10px 12px\",\r\n    transition: theme.transitions.create([\"border-color\", \"box-shadow\"]),\r\n    \"&:focus\": {\r\n      borderRadius: 4,\r\n      borderColor: \"#ced4da\",\r\n    },\r\n  },\r\n  button: {\r\n    textTransform: \"none\",\r\n    width: \"100%\",\r\n  },\r\n  image: {\r\n    width: \"100%\",\r\n    height: \"180px\",\r\n    borderRadius: \"4px\",\r\n  },\r\n}));\r\n\r\nconst ProfileContent = () => {\r\n  const classes = useStyles();\r\n  const [stateApp, setStateApp] = useContext(AppContext);\r\n  const [stateProfile, setStateProfile] = useContext(ProfileContext);\r\n  const {\r\n    user: { email },\r\n  } = stateApp;\r\n\r\n  const { data, error, loading } = useQuery(GETPROFILE, {\r\n    variables: { email },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n  const {\r\n    fields: { fullname, displayname, activity, phone, timezone, profileImage },\r\n    isImageModalOpen,\r\n  } = stateProfile;\r\n\r\n  useEffect(() => {\r\n    if (data?.profileByEmail?.profile) {\r\n      const {\r\n        profileByEmail: {\r\n          profile: {\r\n            fullname,\r\n            displayname,\r\n            activity,\r\n            phone,\r\n            timezone,\r\n            profileImage,\r\n          },\r\n        },\r\n      } = data;\r\n\r\n      setStateProfile({\r\n        ...stateProfile,\r\n        fields: {\r\n          fullname,\r\n          displayname,\r\n          activity,\r\n          phone,\r\n          timezone,\r\n          profileImage,\r\n        },\r\n      });\r\n    }\r\n  }, [data]);\r\n\r\n  const onChange = ({ name, value }) => {\r\n    setStateProfile({\r\n      ...stateProfile,\r\n      fields: { ...stateProfile.fields, [name]: value },\r\n    });\r\n  };\r\n\r\n  const handleImage = (e) => {\r\n    if (e.target.files?.length > 0) {\r\n      const reader = new FileReader();\r\n      reader.addEventListener(\"load\", () =>\r\n        setStateProfile({\r\n          ...stateProfile,\r\n          isImageModalOpen: true,\r\n          selectedImage: reader.result,\r\n        })\r\n      );\r\n      reader.readAsDataURL(e.target.files[0]);\r\n    }\r\n  };\r\n\r\n  const formatPhone = (number) => {\r\n    const formatted = `${number}`.replace(/\\D/g, \"\");\r\n    const match = formatted.match(/^(\\d{3})(\\d{3})(\\d{4})$/);\r\n    if (match) {\r\n      return `(${match[1]}) ${match[2]}-${match[3]}`;\r\n    }\r\n    return number;\r\n  };\r\n\r\n  return (\r\n    <MuiDialogContent>\r\n      <Grid container>\r\n        <Grid item sm={8}>\r\n          <TextField\r\n            InputLabelProps={{\r\n              classes: { root: classes.label, focused: classes.focused },\r\n              shrink: true,\r\n            }}\r\n            InputProps={{\r\n              disableUnderline: true,\r\n              classes: { input: classes.input },\r\n            }}\r\n            FormHelperTextProps={{\r\n              classes: { root: classes.helperText },\r\n            }}\r\n            label={\"Full Name\"}\r\n            placeholder={\"Your Full Name\"}\r\n            name=\"fullname\"\r\n            value={fullname}\r\n            onChange={({ target }) => onChange(target)}\r\n          />\r\n          <Box pb={2.5} />\r\n          <TextField\r\n            InputLabelProps={{\r\n              classes: { root: classes.label, focused: classes.focused },\r\n              shrink: true,\r\n            }}\r\n            InputProps={{\r\n              disableUnderline: true,\r\n              classes: { input: classes.input },\r\n            }}\r\n            FormHelperTextProps={{\r\n              classes: { root: classes.helperText },\r\n            }}\r\n            label={\"Display Name\"}\r\n            placeholder={\"Display Name\"}\r\n            helperText={\"This could be your nickname or first name\"}\r\n            name=\"displayname\"\r\n            value={displayname}\r\n            onChange={({ target }) => onChange(target)}\r\n          />\r\n          <Box pb={2.5} />\r\n          <TextField\r\n            InputLabelProps={{\r\n              classes: { root: classes.label, focused: classes.focused },\r\n              shrink: true,\r\n            }}\r\n            InputProps={{\r\n              disableUnderline: true,\r\n              error: true,\r\n              classes: { input: classes.input },\r\n            }}\r\n            FormHelperTextProps={{\r\n              classes: { root: classes.helperText },\r\n            }}\r\n            label={\"What you do\"}\r\n            placeholder={\"Your Role or Title\"}\r\n            helperText={\"Let people know what you do\"}\r\n            name=\"activity\"\r\n            value={activity}\r\n            onChange={({ target }) => onChange(target)}\r\n          />\r\n          <Box pb={2.5} />\r\n          <TextField\r\n            InputLabelProps={{\r\n              classes: { root: classes.label, focused: classes.focused },\r\n              shrink: true,\r\n            }}\r\n            InputProps={{\r\n              disableUnderline: true,\r\n              error: true,\r\n              classes: { input: classes.input },\r\n            }}\r\n            FormHelperTextProps={{\r\n              classes: { root: classes.helperText },\r\n            }}\r\n            label={\"Phone number\"}\r\n            placeholder={formatPhone(\"555-555-5555\")}\r\n            helperText={\"Enter your phone number\"}\r\n            name=\"phone\"\r\n            value={formatPhone(phone)}\r\n            onChange={({ target }) => onChange(target)}\r\n          />\r\n        </Grid>\r\n        <Grid item sm={4}>\r\n          <Typography variant=\"body1\">Profile Photo</Typography>\r\n          {profileImage?.length > 0 ? (\r\n            <CardMedia\r\n              className={classes.image}\r\n              component={\"img\"}\r\n              image={profileImage}\r\n              title=\"Profile Image\"\r\n            />\r\n          ) : (\r\n            <Skeleton variant=\"rect\" className={classes.image} />\r\n          )}\r\n          <Box pb={2.5} />\r\n          <input\r\n            accept=\"image/*\"\r\n            style={{ display: \"none\" }}\r\n            id=\"profile-image\"\r\n            type=\"file\"\r\n            name=\"profileimage\"\r\n            onChange={(e) => handleImage(e)}\r\n          />\r\n          <label htmlFor=\"profile-image\">\r\n            <Button\r\n              variant=\"outlined\"\r\n              component=\"span\"\r\n              className={classes.button}\r\n            >\r\n              Upload an image\r\n            </Button>\r\n          </label>\r\n        </Grid>\r\n      </Grid>\r\n    </MuiDialogContent>\r\n  );\r\n};\r\n\r\nexport default ProfileContent;\r\n"]},"metadata":{},"sourceType":"module"}