{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\John Geliberte\\\\Work\\\\freelance\\\\m1\\\\src\\\\components\\\\MapControls\\\\components\\\\spatialDataCardEdit.js\";\nimport React, { useState, useContext, useRef, useEffect } from \"react\";\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\"; //material-ui components\n\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport Select from \"@material-ui/core/Select\";\nimport Modal from '@material-ui/core/Modal';\nimport Card from \"@material-ui/core/Card\";\nimport CardHeader from \"@material-ui/core/CardHeader\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport CardActions from \"@material-ui/core/CardActions\"; //import Avatar from '@material-ui/core/Avatar'\n\nimport IconButton from \"@material-ui/core/IconButton\"; // import Typography from '@material-ui/core/Typography'\n// import Table from '@material-ui/core/Table'\n// import TableBody from '@material-ui/core/TableBody'\n// import TableCell from '@material-ui/core/TableCell'\n// import TableRow from '@material-ui/core/TableRow'\n// import useMediaQuery from '@material-ui/core/useMediaQuery'\n// import Dialog from '@material-ui/core/Dialog'\n// import DialogActions from '@material-ui/core/DialogActions'\n// import DialogContent from '@material-ui/core/DialogContent'\n\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport EditIcon from '@material-ui/icons/Edit';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport { AppContext } from \"../../../AppContext\"; // Helpers for area calcs\n\nimport { area, convertArea, length } from \"@turf/turf\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: \"flex\",\n    padding: \"0px\"\n  },\n  card: {\n    fontFamily: \"Poppins\",\n    fontStyle: \"normal\",\n    fontSize: \".75rem\",\n    background: \"#011133\",\n    borderStyle: \"solid\",\n    borderWidth: \"thin\",\n    borderColor: \"#011133\",\n    width: \"325px\",\n    height: \"auto\",\n    position: \"relative\",\n    top: \"10vh\",\n    left: \"10vw\"\n  },\n  cardPopup: {\n    fontFamily: \"Poppins\",\n    fontStyle: \"normal\",\n    fontSize: \".75rem\",\n    background: \"#011133\",\n    borderStyle: \"solid\",\n    borderWidth: \"thin\",\n    borderColor: \"#011133\",\n    width: \"325px\",\n    height: \"auto\",\n    position: \"relative\"\n  },\n  cardHeader: {\n    padding: \"2%\",\n    height: \"15%\"\n  },\n  cardTitle: {\n    fontWeight: 600,\n    fontSize: \"1rem\",\n    lineHeight: \"1rem\",\n    color: \"#FFFFFF\",\n    textTransform: \"uppercase\",\n    position: \"relative\",\n    height: \"1rem\",\n    left: \"7.46%\",\n    right: \"39.32%\",\n    top: \"calc(50% - 23px/2 - 140px)\"\n  },\n  subheader: {\n    fontWeight: 300,\n    lineHeight: \"16px\",\n    color: \"#FFFFFF\",\n    position: \"relative\",\n    height: \"17px\",\n    left: \"7.46%\",\n    right: \"58.31%\",\n    top: \"calc(50% - 17px/2 - 120px)\"\n  },\n  cardAction: {\n    color: \"black\",\n    width: \"100%\",\n    height: \"80%\",\n    flexGrow: 1,\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"space-evenly\",\n    //alignItems: \"flex-start\",\n    backgroundColor: \"#fff\"\n  },\n  cardContent: {\n    height: \"10%\",\n    backgroundColor: \"#fff\",\n    padding: \"0px\",\n    paddingBottom: \"0px\"\n  },\n  actionWrapper: {\n    flexGrow: 1,\n    display: \"flex\",\n    justifyContent: \"space-evenly\"\n  },\n  input: {\n    display: \"flex\",\n    marginLeft: \"0px\",\n    marginBottom: \"15px\"\n  },\n  buttonContainer: {\n    //height: \"25%\",\n    display: \"flex\",\n    //paddingRight: \"3%\",\n    //paddingLeft: \"3%\",\n    backgroundColor: \"#fff\",\n    //paddingBottom: \"3%\",\n    //\"&:last-child\": { padding: \"0px\" }\n    justifyContent: \"space-evenly\"\n  },\n  button: {\n    width: \"40%\",\n    //margin: \"3%\",\n    justifyContent: \"space-evenly\"\n  },\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 265,\n    color: \"black\" //paddingBottom: 3\n\n  },\n  label: {\n    background: \"white\",\n    padding: \"0px 4px\"\n  },\n  TextField: {\n    display: \"flex\",\n    margin: theme.spacing(1),\n    minWidth: 265,\n    color: \"black\"\n  },\n  modalContainer: {\n    background: \"white\",\n    width: \"500px\",\n    textAlign: \"center\",\n    padding: \"15px\",\n    position: \"absolute\",\n    left: \"50%\",\n    top: \"50%\",\n    transform: \"translate(-50%, -50%)\"\n  }\n}));\nexport default function SpatialDataCardEdit(props) {\n  const classes = useStyles();\n  const {\n    sdType,\n    shapeLabel,\n    projectName,\n    sdNotes,\n    sdGrossAcres\n  } = props.selectedFeature.properties;\n  const {\n    cardClass = \"card\"\n  } = props;\n  const [dataType, setDataType] = useState(sdType);\n  const [dataName, setDataName] = useState(shapeLabel);\n  const [dataProject, setDataProject] = useState(projectName);\n  const [grossAcres, setGrossAcres] = useState(sdGrossAcres);\n  const [dataNotes, setDataNotes] = useState(sdNotes);\n  const [stateApp, setStateApp] = useContext(AppContext);\n  const [drawFeatureId, setDrawFeatureId] = useState(\"\");\n  const [custLayers, setCustLayers] = useState([]);\n  const [openDeleteModal, setDeleteModal] = useState(false);\n  const [showError, setShowError] = useState(false);\n  const inputLabel = useRef(null);\n  const [labelWidth, setLabelWidth] = useState(0);\n  useEffect(() => {\n    setDataType(sdType);\n    setDataName(shapeLabel);\n    setDataProject(projectName);\n    setDataNotes(sdNotes);\n  }, [props.selectedFeature]);\n  useEffect(() => {\n    let udName = \"\";\n\n    switch (dataType) {\n      case \"interest\":\n        udName = \"Area of Interest\";\n        break;\n\n      case \"parcel\":\n        udName = \"Parcels\";\n        break;\n\n      default:\n        udName = \"\";\n        break;\n    }\n\n    if (udName) {\n      const layerIndex = stateApp.userDefinedLayers.findIndex(layer => layer.name == udName);\n      setStateApp({ ...stateApp,\n        tempCheckedUserDefinedLayers: layerIndex\n      });\n    } else {\n      setStateApp({ ...stateApp,\n        tempCheckedUserDefinedLayers: null\n      });\n    }\n  }, [dataType]);\n\n  const updateDataNotes = evt => {\n    let updatedNotes = evt.target.value;\n    setDataNotes(updatedNotes);\n  };\n\n  const saveSpatialData = () => {\n    if (dataName) {\n      const spatialData = {\n        sdType: dataType === \"\" ? \"interest\" : dataType,\n        shapeLabel: dataName,\n        projectName: dataProject,\n        sdGrossAcres: grossAcres // sdNotes: dataNotes\n\n      };\n      props.saveSpatialData(spatialData, dataType);\n      const tmpChecked = stateApp.tempCheckedUserDefinedLayers;\n      const checkedLayers = stateApp.checkedUserDefinedLayers.slice(0);\n\n      if (tmpChecked != null && stateApp.checkedUserDefinedLayers.indexOf(tmpChecked) === -1) {\n        checkedLayers.push(tmpChecked);\n      }\n\n      setStateApp({ ...stateApp,\n        checkedUserDefinedLayers: checkedLayers,\n        tempCheckedUserDefinedLayers: null\n      });\n    } else {\n      setShowError(true);\n    }\n  };\n\n  const closeSpatialDataCard = () => {\n    if (drawFeatureId) {\n      stateApp.draw.delete(drawFeatureId);\n      setDrawFeatureId(\"\");\n    }\n\n    setStateApp({ ...stateApp,\n      tempCheckedUserDefinedLayers: null\n    });\n\n    if (custLayers.length > 0) {\n      setStateApp({ ...stateApp,\n        customLayers: custLayers\n      });\n    }\n\n    props.closeSpatialDataCard(false);\n  };\n\n  const deleteSpatialData = () => {\n    setStateApp({ ...stateApp,\n      tempCheckedUserDefinedLayers: null\n    });\n    props.deleteSpatialDataAndShape();\n  };\n\n  const calculateLandArea = () => {\n    const {\n      selectedFeature\n    } = props;\n\n    if (selectedFeature) {\n      if (selectedFeature.geometry.type === \"Polygon\") {\n        const areaInSqMeters = area(selectedFeature);\n        const areaInAcres = convertArea(areaInSqMeters, \"meters\", \"acres\");\n        return `${Math.round(areaInAcres * 100) / 100} acres`;\n      }\n\n      if (selectedFeature.geometry.type === \"LineString\") {\n        const distanceInMiles = length(selectedFeature, {\n          units: \"miles\"\n        });\n        return `${Math.round(distanceInMiles * 100) / 100} miles`;\n      }\n    }\n  };\n\n  const handleClose = () => {\n    setDeleteModal(false);\n  };\n\n  const showDeleteModal = () => {\n    setDeleteModal(true);\n  };\n\n  const editShape = () => {\n    const {\n      selectedFeature\n    } = props;\n    const featureId = selectedFeature.properties.id;\n    const featureLabelId = featureId + '_label';\n\n    if (stateApp.draw) {\n      selectedFeature.id = `edit_polygon_${selectedFeature.properties.id}`;\n      stateApp.draw.add(selectedFeature);\n      stateApp.draw.changeMode(\"direct_select\", {\n        featureId: selectedFeature.id\n      });\n      const {\n        customLayers\n      } = stateApp;\n\n      if (customLayers && customLayers.length > 0) {\n        // const index = customLayers.findIndex(layer => JSON.parse(layer.shape).properties.id === selectedFeature.properties.id);\n        const filteredLayers = customLayers.filter(layer => JSON.parse(layer.shape).properties.id !== featureId && JSON.parse(layer.shape).properties.id !== featureLabelId);\n        const editingLayers = customLayers.filter(layer => JSON.parse(layer.shape).properties.id === featureId || JSON.parse(layer.shape).properties.id === featureLabelId);\n        setCustLayers(customLayers);\n        setStateApp({ ...stateApp,\n          customLayers: filteredLayers,\n          editingUserDefinedLayers: editingLayers,\n          // selectedUserDefinedLayer: selectedFeature,\n          editLayer: true\n        });\n      }\n\n      props.closeSpatialDataCard();\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(Card, {\n    className: classes[cardClass],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CardHeader, {\n    className: classes.cardHeader,\n    classes: {\n      title: classes.cardTitle,\n      subheader: classes.subheader\n    },\n    title: \"Spatial Data\",\n    action: /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.actionWrapper,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(IconButton, {\n      color: \"secondary\",\n      onClick: showDeleteModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(DeleteIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(IconButton, {\n      color: \"secondary\",\n      onClick: editShape,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(EditIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(IconButton, {\n      color: \"secondary\",\n      onClick: closeSpatialDataCard,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(CloseIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 15\n      }\n    }))),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(CardActions, {\n    classes: {\n      root: classes.cardAction\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 360,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 362,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(FormControl, {\n    required: true,\n    variant: \"outlined\",\n    className: classes.formControl,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 363,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(InputLabel, {\n    ref: inputLabel,\n    className: classes.label,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 13\n    }\n  }, \" Boundary Type \"), /*#__PURE__*/React.createElement(Select, {\n    value: dataType,\n    onChange: evt => setDataType(evt.target.value),\n    labelWidth: labelWidth,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    value: \"interest\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 374,\n      columnNumber: 15\n    }\n  }, \"Area of Interest\"), /*#__PURE__*/React.createElement(MenuItem, {\n    value: \"parcel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 375,\n      columnNumber: 15\n    }\n  }, \"Parcel/Tract\")))), (dataType === \"interest\" || dataType === \"parcel\") && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginLeft: \"0\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 385,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.TextField,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    fullWidth: true,\n    variant: \"outlined\",\n    label: \"Name\",\n    type: \"text\",\n    error: showError //placeholder= \"Enter Name\"\n    ,\n    value: dataName,\n    autoComplete: \"disabled\",\n    onChange: evt => setDataName(evt.target.value),\n    helperText: showError ? 'Name is required!' : '',\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 388,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.TextField,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 402,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    fullWidth: true,\n    variant: \"outlined\",\n    label: \"Gross Acres\",\n    type: \"text\" //placeholder= \"Enter Name\"\n    ,\n    value: grossAcres,\n    autoComplete: \"disabled\",\n    onChange: evt => setGrossAcres(evt.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 403,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.TextField,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 427,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    disabled: true,\n    autoComplete: \"disabled\",\n    variant: \"outlined\",\n    label: \"Calc. Acres\",\n    fullWidth: true,\n    defaultValue: calculateLandArea(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 15\n    }\n  })))), /*#__PURE__*/React.createElement(CardContent, {\n    className: classes.buttonContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 454,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"secondary\" //disableRipple={true}\n    //size=\"medium\"\n    ,\n    className: classes.button,\n    onClick: saveSpatialData //paddingRight= \"6px\"\n    ,\n    disabled: dataType === \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 456,\n      columnNumber: 9\n    }\n  }, dataType !== \"title\" ? \"Save\" : \"Next\"), /*#__PURE__*/React.createElement(Modal, {\n    open: openDeleteModal,\n    onClose: handleClose,\n    \"aria-labelledby\": \"delete-modal-title\",\n    \"aria-describedby\": \"delete-modal-description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 481,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.modalContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 487,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    id: \"delete-modal-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 488,\n      columnNumber: 13\n    }\n  }, \"Are you sure?\"), /*#__PURE__*/React.createElement(\"p\", {\n    id: \"delete-modal-description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 489,\n      columnNumber: 13\n    }\n  }, \"Are you sure want to remove this shape?\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.buttonContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 490,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    className: classes.button,\n    style: {\n      backgroundColor: \"light gray\",\n      color: \"dark gray\"\n    },\n    onClick: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 491,\n      columnNumber: 15\n    }\n  }, \"Back\"), /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    className: classes.button,\n    style: {\n      backgroundColor: \"light gray\",\n      color: \"dark gray\"\n    },\n    onClick: deleteSpatialData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 499,\n      columnNumber: 15\n    }\n  }, \"Delete\"))))));\n}","map":{"version":3,"sources":["C:/Users/John Geliberte/Work/freelance/m1/src/components/MapControls/components/spatialDataCardEdit.js"],"names":["React","useState","useContext","useRef","useEffect","makeStyles","useTheme","InputLabel","MenuItem","FormControl","Select","Modal","Card","CardHeader","CardContent","CardActions","IconButton","CloseIcon","EditIcon","DeleteIcon","Button","TextField","AppContext","area","convertArea","length","useStyles","theme","root","display","padding","card","fontFamily","fontStyle","fontSize","background","borderStyle","borderWidth","borderColor","width","height","position","top","left","cardPopup","cardHeader","cardTitle","fontWeight","lineHeight","color","textTransform","right","subheader","cardAction","flexGrow","flexDirection","justifyContent","backgroundColor","cardContent","paddingBottom","actionWrapper","input","marginLeft","marginBottom","buttonContainer","button","formControl","margin","spacing","minWidth","label","modalContainer","textAlign","transform","SpatialDataCardEdit","props","classes","sdType","shapeLabel","projectName","sdNotes","sdGrossAcres","selectedFeature","properties","cardClass","dataType","setDataType","dataName","setDataName","dataProject","setDataProject","grossAcres","setGrossAcres","dataNotes","setDataNotes","stateApp","setStateApp","drawFeatureId","setDrawFeatureId","custLayers","setCustLayers","openDeleteModal","setDeleteModal","showError","setShowError","inputLabel","labelWidth","setLabelWidth","udName","layerIndex","userDefinedLayers","findIndex","layer","name","tempCheckedUserDefinedLayers","updateDataNotes","evt","updatedNotes","target","value","saveSpatialData","spatialData","tmpChecked","checkedLayers","checkedUserDefinedLayers","slice","indexOf","push","closeSpatialDataCard","draw","delete","customLayers","deleteSpatialData","deleteSpatialDataAndShape","calculateLandArea","geometry","type","areaInSqMeters","areaInAcres","Math","round","distanceInMiles","units","handleClose","showDeleteModal","editShape","featureId","id","featureLabelId","add","changeMode","filteredLayers","filter","JSON","parse","shape","editingLayers","editingUserDefinedLayers","editLayer","title"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useRef, useEffect } from \"react\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\n\r\n//material-ui components\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport Modal from '@material-ui/core/Modal';\r\nimport Card from \"@material-ui/core/Card\";\r\nimport CardHeader from \"@material-ui/core/CardHeader\";\r\nimport CardContent from \"@material-ui/core/CardContent\";\r\nimport CardActions from \"@material-ui/core/CardActions\";\r\n//import Avatar from '@material-ui/core/Avatar'\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\n// import Typography from '@material-ui/core/Typography'\r\n// import Table from '@material-ui/core/Table'\r\n// import TableBody from '@material-ui/core/TableBody'\r\n// import TableCell from '@material-ui/core/TableCell'\r\n// import TableRow from '@material-ui/core/TableRow'\r\n// import useMediaQuery from '@material-ui/core/useMediaQuery'\r\n// import Dialog from '@material-ui/core/Dialog'\r\n// import DialogActions from '@material-ui/core/DialogActions'\r\n// import DialogContent from '@material-ui/core/DialogContent'\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport { AppContext } from \"../../../AppContext\";\r\n\r\n// Helpers for area calcs\r\nimport { area, convertArea, length } from \"@turf/turf\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    display: \"flex\",\r\n    padding: \"0px\"\r\n  },\r\n\r\n  card: {\r\n    fontFamily: \"Poppins\",\r\n    fontStyle: \"normal\",\r\n    fontSize: \".75rem\",\r\n    background: \"#011133\",\r\n    borderStyle: \"solid\",\r\n    borderWidth: \"thin\",\r\n    borderColor: \"#011133\",\r\n    width: \"325px\",\r\n    height: \"auto\",\r\n    position: \"relative\",\r\n    top: \"10vh\",\r\n    left: \"10vw\"\r\n  },\r\n\r\n  cardPopup: {\r\n    fontFamily: \"Poppins\",\r\n    fontStyle: \"normal\",\r\n    fontSize: \".75rem\",\r\n    background: \"#011133\",\r\n    borderStyle: \"solid\",\r\n    borderWidth: \"thin\",\r\n    borderColor: \"#011133\",\r\n    width: \"325px\",\r\n    height: \"auto\",\r\n    position: \"relative\",\r\n  },\r\n\r\n  cardHeader: {\r\n    padding: \"2%\",\r\n    height: \"15%\"\r\n  },\r\n\r\n  cardTitle: {\r\n    fontWeight: 600,\r\n    fontSize: \"1rem\",\r\n    lineHeight: \"1rem\",\r\n    color: \"#FFFFFF\",\r\n    textTransform: \"uppercase\",\r\n    position: \"relative\",\r\n    height: \"1rem\",\r\n    left: \"7.46%\",\r\n    right: \"39.32%\",\r\n    top: \"calc(50% - 23px/2 - 140px)\"\r\n  },\r\n\r\n  subheader: {\r\n    fontWeight: 300,\r\n    lineHeight: \"16px\",\r\n    color: \"#FFFFFF\",\r\n    position: \"relative\",\r\n    height: \"17px\",\r\n    left: \"7.46%\",\r\n    right: \"58.31%\",\r\n    top: \"calc(50% - 17px/2 - 120px)\"\r\n  },\r\n\r\n  cardAction: {\r\n    color: \"black\",\r\n    width: \"100%\",\r\n    height: \"80%\",\r\n    flexGrow: 1,\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    justifyContent: \"space-evenly\",\r\n    //alignItems: \"flex-start\",\r\n    backgroundColor: \"#fff\"\r\n  },\r\n  cardContent: {\r\n    height: \"10%\",\r\n    backgroundColor: \"#fff\",\r\n    padding: \"0px\",\r\n    paddingBottom: \"0px\"\r\n  },\r\n  actionWrapper: {\r\n    flexGrow: 1,\r\n    display: \"flex\",\r\n    justifyContent: \"space-evenly\"\r\n  },\r\n  input: {\r\n    display: \"flex\",\r\n    marginLeft: \"0px\",\r\n    marginBottom: \"15px\"\r\n  },\r\n\r\n  buttonContainer: {\r\n    //height: \"25%\",\r\n    display: \"flex\",\r\n    //paddingRight: \"3%\",\r\n    //paddingLeft: \"3%\",\r\n    backgroundColor: \"#fff\",\r\n    //paddingBottom: \"3%\",\r\n    //\"&:last-child\": { padding: \"0px\" }\r\n    justifyContent: \"space-evenly\"\r\n  },\r\n  button: {\r\n    width: \"40%\",\r\n    //margin: \"3%\",\r\n    justifyContent: \"space-evenly\"\r\n  },\r\n\r\n  formControl: {\r\n    margin: theme.spacing(1),\r\n    minWidth: 265,\r\n    color: \"black\",\r\n    //paddingBottom: 3\r\n  },\r\n  label: {\r\n    background: \"white\",\r\n    padding: \"0px 4px\"\r\n  },\r\n  TextField: {\r\n    display: \"flex\",\r\n    margin: theme.spacing(1),\r\n    minWidth: 265,\r\n    color: \"black\"\r\n  },\r\n  modalContainer: {\r\n    background: \"white\",\r\n    width: \"500px\",\r\n    textAlign: \"center\",\r\n    padding: \"15px\",\r\n    position: \"absolute\",\r\n    left: \"50%\",\r\n    top: \"50%\",\r\n    transform: \"translate(-50%, -50%)\",\r\n  }\r\n}));\r\n\r\nexport default function SpatialDataCardEdit(props) {\r\n  const classes = useStyles();\r\n  const {\r\n    sdType,\r\n    shapeLabel,\r\n    projectName,\r\n    sdNotes,\r\n    sdGrossAcres,\r\n  } = props.selectedFeature.properties;\r\n  const { cardClass = \"card\" } = props;\r\n  const [dataType, setDataType] = useState(sdType);\r\n  const [dataName, setDataName] = useState(shapeLabel);\r\n  const [dataProject, setDataProject] = useState(projectName);\r\n  const [grossAcres, setGrossAcres] = useState(sdGrossAcres);\r\n  const [dataNotes, setDataNotes] = useState(sdNotes);\r\n  \r\n  const [stateApp, setStateApp] = useContext(AppContext);\r\n  const [drawFeatureId, setDrawFeatureId] = useState(\"\");\r\n  const [custLayers, setCustLayers] = useState([]);\r\n\r\n  const [openDeleteModal, setDeleteModal] = useState(false);\r\n  const [showError, setShowError] = useState(false);\r\n\r\n\r\n  const inputLabel = useRef(null);\r\n  const [labelWidth, setLabelWidth] = useState(0);\r\n\r\n  useEffect(() => {\r\n    setDataType(sdType);\r\n    setDataName(shapeLabel);\r\n    setDataProject(projectName);\r\n    setDataNotes(sdNotes);\r\n  }, [props.selectedFeature]);\r\n\r\n  useEffect(() => {\r\n    let udName = \"\"\r\n    switch (dataType) {\r\n      case \"interest\":\r\n        udName = \"Area of Interest\";\r\n        break;\r\n      case \"parcel\":\r\n        udName = \"Parcels\";\r\n        break;\r\n      default:\r\n        udName = \"\";\r\n        break;\r\n    }\r\n    if (udName) {\r\n      const layerIndex = stateApp.userDefinedLayers.findIndex(layer => layer.name == udName);\r\n      setStateApp({\r\n        ...stateApp,\r\n        tempCheckedUserDefinedLayers: layerIndex\r\n      });\r\n    } else {\r\n      setStateApp({\r\n        ...stateApp,\r\n        tempCheckedUserDefinedLayers: null\r\n      });\r\n    }\r\n  }, [dataType]);\r\n\r\n  const updateDataNotes = evt => {\r\n    let updatedNotes = evt.target.value;\r\n    setDataNotes(updatedNotes);\r\n  };\r\n  const saveSpatialData = () => {\r\n    if (dataName) {\r\n      const spatialData = {\r\n        sdType: dataType === \"\" ? \"interest\" : dataType,\r\n        shapeLabel: dataName,\r\n        projectName: dataProject,\r\n        sdGrossAcres: grossAcres,\r\n        // sdNotes: dataNotes\r\n      };\r\n      props.saveSpatialData(spatialData, dataType);\r\n  \r\n      const tmpChecked = stateApp.tempCheckedUserDefinedLayers;\r\n      const checkedLayers = stateApp.checkedUserDefinedLayers.slice(0);\r\n      if (tmpChecked != null && stateApp.checkedUserDefinedLayers.indexOf(tmpChecked) === -1) {\r\n        checkedLayers.push(tmpChecked)\r\n      }\r\n      setStateApp({\r\n        ...stateApp,\r\n        checkedUserDefinedLayers: checkedLayers,\r\n        tempCheckedUserDefinedLayers: null\r\n      })\r\n    } else {\r\n      setShowError(true);\r\n    }\r\n  };\r\n\r\n  const closeSpatialDataCard = () => {\r\n    if (drawFeatureId) {\r\n      stateApp.draw.delete(drawFeatureId);\r\n      setDrawFeatureId(\"\");\r\n    }\r\n    setStateApp({\r\n      ...stateApp,\r\n      tempCheckedUserDefinedLayers: null,\r\n    });\r\n    if (custLayers.length > 0) {\r\n      setStateApp({\r\n        ...stateApp,\r\n        customLayers: custLayers\r\n      });\r\n    }\r\n    \r\n    props.closeSpatialDataCard(false);\r\n  }\r\n\r\n  const deleteSpatialData = () => {\r\n    setStateApp({\r\n      ...stateApp,\r\n      tempCheckedUserDefinedLayers: null\r\n    });\r\n    props.deleteSpatialDataAndShape();\r\n  };\r\n  const calculateLandArea = () => {\r\n    const { selectedFeature } = props;\r\n    if (selectedFeature) {\r\n      if (selectedFeature.geometry.type === \"Polygon\") {\r\n        const areaInSqMeters = area(selectedFeature);\r\n        const areaInAcres = convertArea(areaInSqMeters, \"meters\", \"acres\");\r\n        return `${Math.round(areaInAcres * 100) / 100} acres`;\r\n      }\r\n      if (selectedFeature.geometry.type === \"LineString\") {\r\n        const distanceInMiles = length(selectedFeature, { units: \"miles\" });\r\n        return `${Math.round(distanceInMiles * 100) / 100} miles`;\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setDeleteModal(false);\r\n  }\r\n\r\n  const showDeleteModal = () => {\r\n    setDeleteModal(true);\r\n  }\r\n\r\n  const editShape = () => {\r\n    const { selectedFeature } = props;\r\n    const featureId = selectedFeature.properties.id;\r\n    const featureLabelId = featureId + '_label';\r\n    if (stateApp.draw) {\r\n      selectedFeature.id = `edit_polygon_${selectedFeature.properties.id}`;\r\n      stateApp.draw.add(selectedFeature);\r\n      stateApp.draw.changeMode(\"direct_select\", { featureId: selectedFeature.id });\r\n      const { customLayers } = stateApp;\r\n      if (customLayers && customLayers.length > 0) {\r\n        // const index = customLayers.findIndex(layer => JSON.parse(layer.shape).properties.id === selectedFeature.properties.id);\r\n        const filteredLayers = customLayers.filter(layer => JSON.parse(layer.shape).properties.id !== featureId && JSON.parse(layer.shape).properties.id !== featureLabelId);\r\n        const editingLayers = customLayers.filter(layer => JSON.parse(layer.shape).properties.id === featureId || JSON.parse(layer.shape).properties.id === featureLabelId);\r\n        setCustLayers(customLayers);\r\n        setStateApp({\r\n          ...stateApp,\r\n          customLayers: filteredLayers,\r\n          editingUserDefinedLayers: editingLayers,\r\n          // selectedUserDefinedLayer: selectedFeature,\r\n          editLayer: true,\r\n        });\r\n      }\r\n      props.closeSpatialDataCard();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Card className={classes[cardClass]}>\r\n      <CardHeader\r\n        className={classes.cardHeader}\r\n        classes={{\r\n          title: classes.cardTitle,\r\n          subheader: classes.subheader\r\n        }}\r\n        title=\"Spatial Data\"\r\n        action={\r\n          <div className={classes.actionWrapper}>\r\n            <IconButton color=\"secondary\" onClick={showDeleteModal}>\r\n              <DeleteIcon />\r\n            </IconButton>\r\n            <IconButton color=\"secondary\" onClick={editShape}>\r\n              <EditIcon />\r\n            </IconButton>\r\n\r\n            <IconButton color=\"secondary\" onClick={closeSpatialDataCard}>\r\n              <CloseIcon />\r\n            </IconButton>\r\n          </div>\r\n        }\r\n      ></CardHeader>\r\n      <CardActions classes={{ root: classes.cardAction }}>\r\n        {/*Drop-down menu for Boundary Type */}\r\n        <div>\r\n          <FormControl\r\n            required\r\n            variant=\"outlined\"\r\n            className={classes.formControl}\r\n          >\r\n            <InputLabel ref={inputLabel} className={classes.label}> Boundary Type </InputLabel>\r\n            <Select\r\n              value={dataType}\r\n              onChange={evt => setDataType(evt.target.value)}\r\n              labelWidth={labelWidth}\r\n            >\r\n              <MenuItem value=\"interest\">Area of Interest</MenuItem>\r\n              <MenuItem value=\"parcel\">Parcel/Tract</MenuItem>\r\n              {/* {stateApp.currentFeature &&\r\n                stateApp.currentFeature.geometry.type === \"Polygon\" &&\r\n                !stateApp.currentFeature.properties.isCircle && (\r\n                  <MenuItem value=\"title\">Title Opinion</MenuItem>\r\n                )} */}\r\n            </Select>\r\n          </FormControl>\r\n        </div>\r\n        {(dataType === \"interest\" || dataType === \"parcel\") && (\r\n          <div style={{ marginLeft: \"0\" }}>\r\n            {/* Text Field for Shape Name */}\r\n            <div className={classes.TextField}>\r\n              <TextField\r\n                fullWidth\r\n                variant=\"outlined\"\r\n                label=\"Name\"\r\n                type=\"text\"\r\n                error={showError}\r\n                //placeholder= \"Enter Name\"\r\n                value={dataName}\r\n                autoComplete=\"disabled\"\r\n                onChange={evt => setDataName(evt.target.value)}\r\n                helperText={showError ? 'Name is required!' : ''}\r\n                required\r\n              ></TextField>\r\n            </div>\r\n            <div className={classes.TextField}>\r\n              <TextField\r\n                fullWidth\r\n                variant=\"outlined\"\r\n                label=\"Gross Acres\"\r\n                type=\"text\"\r\n                //placeholder= \"Enter Name\"\r\n                value={grossAcres}\r\n                autoComplete=\"disabled\"\r\n                onChange={evt => setGrossAcres(evt.target.value)}\r\n              ></TextField>\r\n            </div>\r\n\r\n            {/* <div className={classes.TextField}>\r\n           <TextField\r\n          variant=\"outlined\" \r\n          label= \"Project\"\r\n            type=\"text\"\r\n            placeholder=\"Add Project Name\"\r\n            value={dataProject}\r\n            onChange={evt => setDataProject(evt.target.value)}\r\n          ></TextField>\r\n        </div> */}\r\n\r\n            {/* Text Field for Acres covered */}\r\n            <div className={classes.TextField}>\r\n              <TextField\r\n                disabled\r\n                autoComplete=\"disabled\"\r\n                variant=\"outlined\"\r\n                label=\"Calc. Acres\"\r\n                fullWidth\r\n                defaultValue={calculateLandArea()}\r\n              ></TextField>\r\n            </div>\r\n\r\n            {/* Text Field for Notes*/}\r\n            {/* <div className={classes.TextField}>\r\n              <TextField\r\n                fullWidth\r\n                variant=\"outlined\"\r\n                multiline\r\n                minWidth=\"100%\"\r\n                label=\"Notes\"\r\n                rows=\"6\"\r\n                value={dataNotes}\r\n                onChange={updateDataNotes}\r\n              ></TextField>\r\n            </div> */}\r\n          </div>\r\n        )}\r\n      </CardActions>\r\n      <CardContent className={classes.buttonContainer}>\r\n        {/* save button*/}\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"secondary\"\r\n          //disableRipple={true}\r\n          //size=\"medium\"\r\n          className={classes.button}\r\n          onClick={saveSpatialData}\r\n          //paddingRight= \"6px\"\r\n          disabled={dataType === \"\"}\r\n        >\r\n          {dataType !== \"title\" ? \"Save\" : \"Next\"}\r\n        </Button>\r\n\r\n        {/* delete button*/}\r\n        {/* <Button\r\n          variant=\"contained\"\r\n          //disableRipple={true}\r\n          // size=\"medium\"\r\n          className={classes.button}\r\n          style={{ backgroundColor: \"light gray\", color: \"dark gray\" }}\r\n          onClick={deleteSpatialData}\r\n        >\r\n          {\" \"}\r\n          Delete\r\n        </Button> */}\r\n        <Modal\r\n          open = {openDeleteModal}\r\n          onClose = {handleClose}\r\n          aria-labelledby=\"delete-modal-title\"\r\n          aria-describedby=\"delete-modal-description\"\r\n        >\r\n          <div className={classes.modalContainer}>\r\n            <h2 id=\"delete-modal-title\">Are you sure?</h2>\r\n            <p id=\"delete-modal-description\">Are you sure want to remove this shape?</p>\r\n            <div className={classes.buttonContainer} >\r\n              <Button\r\n                variant=\"contained\"\r\n                className={classes.button}\r\n                style={{ backgroundColor: \"light gray\", color: \"dark gray\" }}\r\n                onClick={handleClose}\r\n              >\r\n                Back\r\n              </Button>\r\n              <Button\r\n                variant=\"contained\"\r\n                className={classes.button}\r\n                style={{ backgroundColor: \"light gray\", color: \"dark gray\" }}\r\n                onClick={deleteSpatialData}\r\n              >\r\n                Delete\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </Modal>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}